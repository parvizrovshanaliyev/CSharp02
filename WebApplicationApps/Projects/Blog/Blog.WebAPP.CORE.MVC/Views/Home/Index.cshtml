@using Blog.Shared.Extensions
@model Blog.Shared.Utilities.Results.Abstract.IResult<Blog.Shared.Utilities.Results.Concrete.PagedResult<Blog.Entities.Dtos.Post.PostDto>>;
@{
    ViewBag.Title = "Home Page";
    var currentPage = Model.Data.CurrentPage;
    var pageCount = Model.Data.PageCount;
    var hasPreviousPage = Model.Data.HasPreviousPage;
    var hasNextPage = Model.Data.HasNextPage;
    var startIndex = Math.Max(currentPage - 5, 1);
    var finishIndex = Math.Min(currentPage + 5, pageCount);
}
<div class="col-md-8">

    <h1 class="my-4">
        Recently <small>Shared Articles</small>
    </h1>

    <div class="card-columns" style=" column-count: 2;">
        @foreach (var post in Model.Data.Results)
        {
            <!-- Blog post-->
            <div class="card">
                
                <a asp-controller="Post" asp-action="Detail" asp-route-id="@post.Id">
                    <img alt="@post.Title" class="card-img-top img-fluid" src="~/img/@post.Thumbnail">
                </a>
                <div class="p-3 card-block">
                    <h4 class="card-title">
                        <a asp-controller="Post" asp-action="Detail" asp-route-id="@post.Id">
                            @post.Title
                        </a>
                    </h4>
                    <p class="card-text">
                        @{
                            post.Content = post.Content.RemoveHtmlTags();
                        }
                        @(post.Content.Length > 150 ? post.Content.Substring(0, 150) + "..." : post.Content)
                    </p>
                    <div class="small text-muted">Posted on @post.Date.ToString("d") by <a href="#">@post.CreatedByName</a>  <small><i class="fa fa-eye"></i> @post.ViewsCount</small></div>
                </div>
            </div>
           
        }
    </div>
    <nav aria-label="Pagination">
        <hr class="my-0">
        <ul class="pagination justify-content-center my-4">
            @if(hasPreviousPage)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action("Index", "Home", new {categoryId = ViewBag.CategoryId, currentPage = currentPage - 1 })">Previous</a>
                </li>
            }
            else
            {
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                </li>
            }
            
            @for (var i = startIndex; i <= finishIndex; i++)
            {
                <li class="page-item @(currentPage == i ? "active" : "")">
                    <a class="page-link" href="@Url.Action("Index", "Home", new { categoryId = ViewBag.CategoryId, currentPage = i })">@i</a>
                </li>
            }
            @if(hasNextPage)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action("Index", "Home", new { categoryId = ViewBag.CategoryId, currentPage = currentPage + 1 })">Next</a>
                </li>
            }
            else
            {
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Next</a>
                </li>
            }
        </ul>
    </nav>
</div>
@section Styles
{
    <style>
        .card-columns .card{
            border-radius: 4px;
            background: #fff;
            box-shadow: 0 6px 10px rgba(0,0,0,.08), 0 0 6px rgba(0,0,0,.05);
            transition: .3s transform cubic-bezier(.155,1.105,.295,1.12),.3s box-shadow,.3s -webkit-transform cubic-bezier(.155,1.105,.295,1.12);
            /*padding: 14px 80px 18px 36px;*/
            cursor: pointer;
        }

        .card-columns .card:hover{
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,.12), 0 4px 8px rgba(0,0,0,.06);
        }
        .card-title a {
            color: black;
            text-decoration: none;
        }
    </style>
}
